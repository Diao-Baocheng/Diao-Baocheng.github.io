{{ $disableImageOptimization := .Site.Params.disableImageOptimization | default false }}
<div class="relative overflow-hidden hero-animated">
    <div class="relative hero-animated-content">
        {{ with .Site.Params.Author.image }}
        {{ $authorImage := "" }}
        {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
        {{ $authorImage = resources.GetRemote . }}
        {{ else }}
        {{ $authorImage = resources.Get . }}
        {{ end }}
        {{ if $authorImage }}
        {{ $final := $authorImage }}
        {{ $squareImage := $authorImage }}
        {{ if not (or $disableImageOptimization (eq $authorImage.MediaType.SubType "svg")) }}
        {{ $final = $authorImage.Fill (print "288x288 q" ( $.Site.Params.Author.imagequality | default "96"
        )) }}
        {{ $shortSide := int (math.Min $authorImage.Width $authorImage.Height) }}
        {{ $squareImage = $authorImage.Crop (printf "%dx%d" $shortSide $shortSide ) }}
        {{ end }}
        <img class="mb-4 h-40 w-40 rounded-full" width="160" height="160"
            alt="{{ $.Site.Params.Author.name | default `Author` }}" src="{{ $final.RelPermalink }}"
            data-zoom-src="{{ $squareImage.RelPermalink }}">
        {{ end }}
        {{ end }}
        <p class="hero-typewriter" aria-label="{{ .Site.Params.homepage.typewriterText | default `知行合一，经世致用` }}">
            <span>{{ .Site.Params.homepage.typewriterText | default `知行合一，经世致用` }}</span>
        </p>
        <div class="mt-1 mb-10 text-2xl">
            {{ with .Site.Params.Author.links }}
            <div class="flex flex-wrap">
                {{ range $links := . }}
                {{ range $name, $url := $links }}
                <a class="px-1 hover:text-primary-400 text-primary-300" href="{{ $url }}" target="_blank"
                    aria-label="{{ $name | title }}" title="{{ $name | title }}" rel="me noopener noreferrer">
                    {{ partial "icon.html" $name }}
                </a>
                {{ end }}
                {{ end }}
            </div>
            {{ end }}
        </div>
        <section class="prose prose-invert w-full">{{ .Content }}</section>
    </div>
</div>
<section>
    {{ partial "recent-articles/main.html" . }}
</section>