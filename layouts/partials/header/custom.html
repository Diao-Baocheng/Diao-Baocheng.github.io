<!-- Custom header layout with navbar branding and full menu -->
<header class="main-header">
    <div class="main-menu flex items-center w-full gap-2 p-1 pl-0">
        <!-- Custom navbar brand with avatar -->
        <a href="{{ "" | relLangURL }}" class="navbar-brand-custom" title="Back to home">
            {{ with .Site.Params.Author.image }}
            {{ $authorImage := "" }}
            {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
            {{ $authorImage = resources.GetRemote . }}
            {{ else }}
            {{ $authorImage = resources.Get . }}
            {{ end }}
            {{ if $authorImage }}
            <img class="navbar-avatar-custom nozoom" src="{{ $authorImage.RelPermalink }}" alt="Big Cabbage" />
            {{ end }}
            {{ end }}
            <span class="navbar-title-custom">Big Cabbage</span>
        </a>

        <!-- Menu items (right side) -->
        <div class="flex items-center ms-auto">
            <div class="hidden md:flex">
                {{ partial "header/components/desktop-menu.html" . }}
            </div>
            <div class="flex md:hidden">
                {{ partial "header/components/mobile-menu.html" . }}
            </div>
        </div>
    </div>

    {{ if .Site.Menus.subnavigation }}
    <div class="main-menu flex pb-3 flex-col items-end justify-between md:justify-start space-x-3">
        <div class="hidden md:flex items-center space-x-5">
            {{ range .Site.Menus.subnavigation }}
            <a href="{{ .URL }}" {{ if or (strings.HasPrefix .URL "http:" ) (strings.HasPrefix .URL "https:" ) }}
                target="_blank" {{ end }} class="flex items-center bf-icon-color-hover">
                {{ if .Pre }}
                <span {{ if and .Pre .Name }}class="mr-1" {{ end }}>
                    {{ partial "icon.html" .Pre }}
                </span>
                {{ end }}
                <span class="text-xs font-light" title="{{ .Title }}">
                    {{ .Name | markdownify }}
                </span>
            </a>
            {{ end }}
        </div>
    </div>
    {{ end }}

    {{ if .Site.Params.highlightCurrentMenuArea }}
    <script>
        (function () {
            var mainmenu = document.querySelector(".main-menu");
            if (!mainmenu) return;

            var path = window.location.pathname;
            var links = mainmenu.querySelectorAll('a[href="' + path + '"]');

            links.forEach(function (link) {
                var targets = link.querySelectorAll("span");
                targets.forEach(function (el) {
                    el.classList.add("active");
                });
            });
        })();
    </script>
    {{ end }}
</header>